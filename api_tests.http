### Inscription d'un nouvel utilisateur + Capture du token
POST http://localhost:8000/api/register
Content-Type: application/json
Accept: application/json

{
    "name": "userTest",
    "email": "user@test.com",
    "password": "password123",
    "password_confirmation": "password123"
}

> {%
    client.global.set("auth_token", response.body.token);
    client.log("Token d'inscription capturé : " + response.body.token);
%}

### Test de login
POST http://localhost:8000/api/login
Content-Type: application/json
Accept: application/json

{
    "email": "nouveau@test.com",
    "password": "password123"
}

> {%
    client.global.set("auth_token", response.body.token);
    client.log("Token capturé : " + response.body.token);
%}

### Créer un ménage pour l'utilisateur test
POST http://localhost:8000/api/households
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
    "name": "Ma Famille Test"
}

### Test de génération de menu (Cas standard)
POST http://localhost:8000/api/menu/generate
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{auth_token}}

{
    "nb_repas": 3,
    "preferences": "Végétarien, budget étudiant, j'aime les pâtes"
}

### Test de génération de menu (Cas gros volume > 7 repas)
POST http://localhost:8000/api/menu/generate
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{auth_token}}

{
    "nb_repas": 10,
    "preferences": "Sans gluten"
}


### 1. Demander des idées à l'IA
POST http://localhost:8000/api/recipes/suggest
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
    "preferences": "Végétarien, cuisine italienne",
    "count": 3
}

### 2. Valider une idée et l'enregistrer en DB
# Copiez un titre reçu dans la requête précédente
POST http://localhost:8000/api/recipes/ai-store
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
    "household_id": 1,
    "title": "spaghetti carbonara"
}

### 3. Créer le sondage (Poll)
# Utilisez les IDs des recettes créées
POST http://localhost:8000/api/meal-polls
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{auth_token}}

{
    "household_id": 1,
    "recipe_ids": [1, 2],
    "duration_hours": 24
}

### 4. Voter pour une recette
POST http://localhost:8000/api/meal-polls/1/vote
Content-Type: application/json
Accept: application/json
Authorization: Bearer {{auth_token}}

{
    "recipe_id": 3
}

### 5. Clôturer et générer la liste de courses
POST http://localhost:8000/api/meal-polls/1/validate
Authorization: Bearer {{auth_token}}
